<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Mathematical theory | Fluent Graphics</title>
  <meta name="description" content="4 Mathematical theory | Fluent Graphics" />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Mathematical theory | Fluent Graphics" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Mathematical theory | Fluent Graphics" />
  
  
  

<meta name="author" content="Adam Bartonicek" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="problem-set.html"/>
<link rel="next" href="high-level-principles.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>



<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Abstract</a></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#brief-history-of-interactive-data-visualization"><i class="fa fa-check"></i><b>2.1</b> Brief history of interactive data visualization</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="introduction.html"><a href="introduction.html#static-data-visualization"><i class="fa fa-check"></i><b>2.1.1</b> Static data visualization</a></li>
<li class="chapter" data-level="2.1.2" data-path="introduction.html"><a href="introduction.html#early-interactive-data-visualization-by-statisticians-for-statisticians"><i class="fa fa-check"></i><b>2.1.2</b> Early interactive data visualization: By statisticians for statisticians</a></li>
<li class="chapter" data-level="2.1.3" data-path="introduction.html"><a href="introduction.html#interactive-data-visualization-and-the-web-world-wide-interactivity"><i class="fa fa-check"></i><b>2.1.3</b> Interactive data visualization and the Web: World-wide interactivity</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#what-is-interactive-visualization"><i class="fa fa-check"></i><b>2.2</b> What even is interactive data visualization?</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="introduction.html"><a href="introduction.html#interactive-vs.-interacting-with"><i class="fa fa-check"></i><b>2.2.1</b> Interactive vs. interacting with</a></li>
<li class="chapter" data-level="2.2.2" data-path="introduction.html"><a href="introduction.html#what-counts-as-interactive-enough"><i class="fa fa-check"></i><b>2.2.2</b> What counts as “interactive enough”?</a></li>
<li class="chapter" data-level="2.2.3" data-path="introduction.html"><a href="introduction.html#complexity-of-interactive-features"><i class="fa fa-check"></i><b>2.2.3</b> Complexity of interactive features</a></li>
<li class="chapter" data-level="2.2.4" data-path="introduction.html"><a href="introduction.html#working-definition"><i class="fa fa-check"></i><b>2.2.4</b> Working definition</a></li>
<li class="chapter" data-level="2.2.5" data-path="introduction.html"><a href="introduction.html#brief-taxonomy-of-common-interactive-features"><i class="fa fa-check"></i><b>2.2.5</b> Brief taxonomy of common interactive features</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="introduction.html"><a href="introduction.html#the-highlighting-problem"><i class="fa fa-check"></i><b>2.3</b> The highlighting problem</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="introduction.html"><a href="introduction.html#linked-selection-and-stacking"><i class="fa fa-check"></i><b>2.3.1</b> Linked selection and stacking</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="introduction.html"><a href="introduction.html#theory-of-data-visualization-systems"><i class="fa fa-check"></i><b>2.4</b> Theory of data visualization systems</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="introduction.html"><a href="introduction.html#scales"><i class="fa fa-check"></i><b>2.4.1</b> Scales</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="problem-set.html"><a href="problem-set.html"><i class="fa fa-check"></i><b>3</b> Problem Set</a>
<ul>
<li class="chapter" data-level="3.1" data-path="problem-set.html"><a href="problem-set.html#data-representation"><i class="fa fa-check"></i><b>3.1</b> Data representation</a></li>
<li class="chapter" data-level="3.2" data-path="problem-set.html"><a href="problem-set.html#data-transformation"><i class="fa fa-check"></i><b>3.2</b> Data transformation</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="problem-set.html"><a href="problem-set.html#partitioning-the-data"><i class="fa fa-check"></i><b>3.2.1</b> Partitioning the data</a></li>
<li class="chapter" data-level="3.2.2" data-path="problem-set.html"><a href="problem-set.html#computing-summaries"><i class="fa fa-check"></i><b>3.2.2</b> Computing summaries</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="problem-set.html"><a href="problem-set.html#scaling"><i class="fa fa-check"></i><b>3.3</b> Scaling</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="mathematical-theory.html"><a href="mathematical-theory.html"><i class="fa fa-check"></i><b>4</b> Mathematical theory</a>
<ul>
<li class="chapter" data-level="4.0.1" data-path="mathematical-theory.html"><a href="mathematical-theory.html#relations"><i class="fa fa-check"></i><b>4.0.1</b> Relations</a></li>
<li class="chapter" data-level="4.0.2" data-path="mathematical-theory.html"><a href="mathematical-theory.html#functions"><i class="fa fa-check"></i><b>4.0.2</b> Functions</a></li>
<li class="chapter" data-level="4.0.3" data-path="mathematical-theory.html"><a href="mathematical-theory.html#partitions"><i class="fa fa-check"></i><b>4.0.3</b> Partitions</a></li>
<li class="chapter" data-level="4.0.4" data-path="mathematical-theory.html"><a href="mathematical-theory.html#preorders"><i class="fa fa-check"></i><b>4.0.4</b> Preorders</a></li>
<li class="chapter" data-level="4.0.5" data-path="mathematical-theory.html"><a href="mathematical-theory.html#monoids"><i class="fa fa-check"></i><b>4.0.5</b> Monoids</a></li>
<li class="chapter" data-level="4.0.6" data-path="mathematical-theory.html"><a href="mathematical-theory.html#groups"><i class="fa fa-check"></i><b>4.0.6</b> Groups</a></li>
<li class="chapter" data-level="4.0.7" data-path="mathematical-theory.html"><a href="mathematical-theory.html#categories"><i class="fa fa-check"></i><b>4.0.7</b> Categories</a></li>
<li class="chapter" data-level="4.0.8" data-path="mathematical-theory.html"><a href="mathematical-theory.html#functors"><i class="fa fa-check"></i><b>4.0.8</b> Functors</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="high-level-principles.html"><a href="high-level-principles.html"><i class="fa fa-check"></i><b>5</b> High-level principles</a>
<ul>
<li class="chapter" data-level="5.0.1" data-path="high-level-principles.html"><a href="high-level-principles.html#user-profile"><i class="fa fa-check"></i><b>5.0.1</b> User profile</a></li>
<li class="chapter" data-level="5.1" data-path="high-level-principles.html"><a href="high-level-principles.html#programming-paradigm"><i class="fa fa-check"></i><b>5.1</b> Programming paradigm</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="high-level-principles.html"><a href="high-level-principles.html#imperative-programming"><i class="fa fa-check"></i><b>5.1.1</b> Imperative programming</a></li>
<li class="chapter" data-level="5.1.2" data-path="high-level-principles.html"><a href="high-level-principles.html#functional-programming"><i class="fa fa-check"></i><b>5.1.2</b> Functional programming</a></li>
<li class="chapter" data-level="5.1.3" data-path="high-level-principles.html"><a href="high-level-principles.html#object-oriented-programming"><i class="fa fa-check"></i><b>5.1.3</b> Object oriented programming</a></li>
<li class="chapter" data-level="5.1.4" data-path="high-level-principles.html"><a href="high-level-principles.html#data-oriented-programming"><i class="fa fa-check"></i><b>5.1.4</b> Data oriented programming</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="high-level-principles.html"><a href="high-level-principles.html#reactivity"><i class="fa fa-check"></i><b>5.2</b> Reactivity</a></li>
<li class="chapter" data-level="5.3" data-path="high-level-principles.html"><a href="high-level-principles.html#row-based-or-column-based"><i class="fa fa-check"></i><b>5.3</b> Row-based or column-based</a></li>
<li class="chapter" data-level="5.4" data-path="high-level-principles.html"><a href="high-level-principles.html#rendering-engine"><i class="fa fa-check"></i><b>5.4</b> Rendering engine</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="system-description.html"><a href="system-description.html"><i class="fa fa-check"></i><b>6</b> System description</a>
<ul>
<li class="chapter" data-level="6.1" data-path="system-description.html"><a href="system-description.html#core-requirements"><i class="fa fa-check"></i><b>6.1</b> Core requirements</a></li>
<li class="chapter" data-level="6.2" data-path="system-description.html"><a href="system-description.html#components"><i class="fa fa-check"></i><b>6.2</b> Components</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="system-description.html"><a href="system-description.html#Indexable"><i class="fa fa-check"></i><b>6.2.1</b> Indexable</a></li>
<li class="chapter" data-level="6.2.2" data-path="system-description.html"><a href="system-description.html#Getter"><i class="fa fa-check"></i><b>6.2.2</b> Getter</a></li>
<li class="chapter" data-level="6.2.3" data-path="system-description.html"><a href="system-description.html#dataframe"><i class="fa fa-check"></i><b>6.2.3</b> Dataframe</a></li>
<li class="chapter" data-level="6.2.4" data-path="system-description.html"><a href="system-description.html#reactive"><i class="fa fa-check"></i><b>6.2.4</b> Reactive</a></li>
<li class="chapter" data-level="6.2.5" data-path="system-description.html"><a href="system-description.html#factors"><i class="fa fa-check"></i><b>6.2.5</b> Factors</a></li>
<li class="chapter" data-level="6.2.6" data-path="system-description.html"><a href="system-description.html#reducers-1"><i class="fa fa-check"></i><b>6.2.6</b> Reducers</a></li>
<li class="chapter" data-level="6.2.7" data-path="system-description.html"><a href="system-description.html#scales-1"><i class="fa fa-check"></i><b>6.2.7</b> Scales</a></li>
<li class="chapter" data-level="6.2.8" data-path="system-description.html"><a href="system-description.html#expanses"><i class="fa fa-check"></i><b>6.2.8</b> Expanses</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="applied-examples.html"><a href="applied-examples.html"><i class="fa fa-check"></i><b>7</b> Applied examples</a></li>
<li class="chapter" data-level="8" data-path="discussion.html"><a href="discussion.html"><i class="fa fa-check"></i><b>8</b> Discussion</a></li>
<li class="chapter" data-level="9" data-path="glossary.html"><a href="glossary.html"><i class="fa fa-check"></i><b>9</b> Glossary</a></li>
<li class="chapter" data-level="10" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>10</b> Appendix</a></li>
<li class="chapter" data-level="11" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>11</b> References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Fluent Graphics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="mathematical-theory" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">4</span> Mathematical theory<a href="mathematical-theory.html#mathematical-theory" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>This chapter provides an overview of essential concepts from category theory, abstract algebra, and general mathematics. Starting with some foundational topics, such as functions, relations, and orders, it slowly builds up to more advanced concepts such as categories, monoids, and functors. Readers familiar these concepts may feel free to skip ahead. However, even the fundamental concepts will be used throughout the thesis, so a refresher might be beneficial.</p>
<p>The material follows primarily from <span class="citation">Fong and Spivak (<a href="#ref-fong2019">2019</a>)</span>, <span class="citation">Lawvere and Schanuel (<a href="#ref-lawvere2009">2009</a>)</span>, <span class="citation">Baez (<a href="#ref-baez2023">2023</a>)</span>, <span class="citation">Pinter (<a href="#ref-pinter2010">2010</a>)</span>, and <span class="citation">Milewski (<a href="#ref-milewski2018">2018</a>)</span>. For an accessible introduction to the topic, interested readers are encouraged to consult these references, particularly <span class="citation">Fong and Spivak (<a href="#ref-fong2019">2019</a>)</span> and <span class="citation">Lawvere and Schanuel (<a href="#ref-lawvere2009">2009</a>)</span>.</p>
<div id="note-on-past-applications-of-abstract-algebra-and-category-theory" class="section level4 hasAnchor" number="4.0.0.1">
<h4><span class="header-section-number">4.0.0.1</span> Note on past applications of abstract algebra and category theory<a href="mathematical-theory.html#note-on-past-applications-of-abstract-algebra-and-category-theory" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Abstract algebra and category theory have been applied to data visualization in the past, in a limited way. Handful authors have used concepts from either field to describe the more abstract aspects of data visualization. For example, <span class="citation">Beckmann (<a href="#ref-beckmann1995">1995</a>)</span> had used categories and functors to lay down a broad theoretical framework for visualization, <span class="citation">Hutchins (<a href="#ref-hutchins1999">1999</a>)</span> attempted the same with algebras, <span class="citation">Kindlmann and Scheidegger (<a href="#ref-kindlmann2014">2014</a>)</span> used functors to define valid perceptual representations of the data, and <span class="citation">Hibbard, Dyer, and Paul (<a href="#ref-hibbard1994">1994</a>)</span> used lattice theory to describe data visualization in the presence of incomplete or approximate data (such as finite-precision floating-point numbers).</p>
<p>Several authors have also discussed category theory and data visualization in a more applied context, by way of functional programming. Specifically, there have been a number of libraries and domain-specific languages (DSLs) for data visualization which have relied on functional programming concepts and have thus been linked to category theory. For some examples, see <span class="citation">Yorgey (<a href="#ref-yorgey2012">2012</a>)</span>, <span class="citation">Petricek (<a href="#ref-petricek2021">2021</a>)</span>, <span class="citation">Smeltzer, Erwig, and Metoyer (<a href="#ref-smeltzer2014">2014</a>)</span>, or <span class="citation">Smeltzer and Erwig (<a href="#ref-smeltzer2018">2018</a>)</span>.</p>
<p>In contrast to these prior works, this thesis leverages category theory to address certain practical problems that arise during interactive data visualization, without introducing a specific functional programming model or DSL. Specifically, the goal is to use concepts from category theory to reason about combinations of graphics, statistical summaries, and interactive features. Ultimately, I argue that these algebraic concepts can help us make well-founded statements about which interactive data visualizations will behave in sensible ways and which ones will not.</p>
<p>And now for the theory.</p>
</div>
<div id="relations" class="section level3 hasAnchor" number="4.0.1">
<h3><span class="header-section-number">4.0.1</span> Relations<a href="mathematical-theory.html#relations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A relation is one of the simplest mathematical structures. Given two sets <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span>, a relation <span class="math inline">\(R\)</span> between <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> is a subset of the Cartesian product of the two sets, <span class="math inline">\(R \subseteq X \times Y\)</span>. In other words, a relation can be thought of as the subset of pairs <span class="math inline">\((x, y) \in X \times Y\)</span> for which the condition “<span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> relate” holds. Note that <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> can be the same set, such that <span class="math inline">\(R \subseteq X \times X\)</span>.</p>
<p>There are many different types of relations. One of the most fundamental relations is equality; in this case, “<span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> relate” means that, for our purposes, <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> are the same, i.e. <span class="math inline">\(x = y\)</span>. Other examples of relations include the usual order relations <span class="math inline">\(&lt;\)</span>, <span class="math inline">\(\leq\)</span>, <span class="math inline">\(&gt;\)</span>, or <span class="math inline">\(\geq\)</span>, and the divides operator <span class="math inline">\(\mid\)</span> (<span class="math inline">\(x \mid y\)</span> means “<span class="math inline">\(x\)</span> divides <span class="math inline">\(y\)</span> without remainder”).</p>
<p>Since a relation is a subset of the product set <span class="math inline">\(X \times Y\)</span>, we can visualize it as a matrix, with values of <span class="math inline">\(X\)</span> as rows, values of <span class="math inline">\(Y\)</span> as columns, and the related pairs <span class="math inline">\((x, y)\)</span> marked out in some specific way. For example, here’s how we can display the order relation <span class="math inline">\(\leq\)</span> on the set <span class="math inline">\(X = \{ 1, 2, 3 \}\)</span>:</p>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-1"></span>
<img src="_main_files/figure-html/unnamed-chunk-1-1.png" alt="A relation is a subset of the Cartesian product of two sets. The diagram shows the usual order relation $\leq$. We can see that 1 is less than or equal to every other element, 2 is less than or equal to 2 and 3, and 3 is less than or equal to 3 only. Note the symmetry between rows and columns - this is due to the fact that the same set ($X$) is display on both dimensions." width="2100" />
<p class="caption">
Figure 4.1: A relation is a subset of the Cartesian product of two sets. The diagram shows the usual order relation <span class="math inline">\(\leq\)</span>. We can see that 1 is less than or equal to every other element, 2 is less than or equal to 2 and 3, and 3 is less than or equal to 3 only. Note the symmetry between rows and columns - this is due to the fact that the same set (<span class="math inline">\(X\)</span>) is display on both dimensions.
</p>
</div>
<p>A relation <span class="math inline">\(R\)</span> can be signified with an infix symbol (such as <span class="math inline">\(\star\)</span>), such that, if <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> relate, <span class="math inline">\((x, y) \in R\)</span>, then we write <span class="math inline">\(x \star_R y\)</span> or <span class="math inline">\(x \star y\)</span> (<span class="math inline">\(R\)</span> implicit), for example, <span class="math inline">\(x = y\)</span>, <span class="math inline">\(x \leq y\)</span>, and so on. Alternatively, for less common types of relations, <span class="math inline">\(R\)</span> can also be used as the infix symbol, such that <span class="math inline">\(x R y\)</span> means “<span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> relate under <span class="math inline">\(R\)</span>”. If two elements do not relate, <span class="math inline">\((x, y) \not \in R\)</span>, we typically do not write this out explicitly - the lack of relation is indicated by its absence.</p>
<p>Relations can have properties. For example, some types of relations are <em>reflexive</em>, such that every element relates to itself: <span class="math inline">\(x \star x\)</span> for all <span class="math inline">\(x \in X\)</span>. This is the case for equivalence relations. In fact, we can define equivalence relations using just three properties:</p>
<div class="definition">
<p><span id="def:unlabeled-div-1" class="definition"><strong>Definition 4.1  (Equivalence relation) </strong></span>A relation <span class="math inline">\(\sim\)</span> on <span class="math inline">\(X\)</span> is called an equivalence relation if it is:</p>
<ol style="list-style-type: decimal">
<li><em>Reflexive</em>: <span class="math inline">\(x \sim x\)</span> for all <span class="math inline">\(x \in X\)</span></li>
<li><em>Symmetric</em>: <span class="math inline">\(x \sim y\)</span> if and only if <span class="math inline">\(y \sim x\)</span> for all <span class="math inline">\(x, y \in X\)</span></li>
<li><em>Transitive</em>: if <span class="math inline">\(x \sim y\)</span> and <span class="math inline">\(y \sim z\)</span>, then <span class="math inline">\(x \sim z\)</span></li>
</ol>
</div>
<p>Equivalence relations encode the notion that two things are the same, <em>for whatever our purpose is</em>. We can further use them to assign objects in <span class="math inline">\(X\)</span> to <em>equivalence classes</em>, which divide <span class="math inline">\(X\)</span> into groups of equivalent objects:</p>
<div class="definition">
<p><span id="def:unlabeled-div-2" class="definition"><strong>Definition 4.2  (Equivalence class) </strong></span>Given a set <span class="math inline">\(X\)</span> and an element <span class="math inline">\(a \in X\)</span>, an equivalence class of <span class="math inline">\(a\)</span> is defined as follows:</p>
<p><span class="math display">\[[a] = \{ x \in X : x \sim a \}\]</span></p>
</div>
<p>While relations might seem like very simple constructions, they are incredibly versatile. The next few sections will discuss three important examples of relations: functions, partitions, and preorders.</p>
</div>
<div id="functions" class="section level3 hasAnchor" number="4.0.2">
<h3><span class="header-section-number">4.0.2</span> Functions<a href="mathematical-theory.html#functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A function is a special kind of relation which encodes a mapping between two sets. More specifically, let <span class="math inline">\(S\)</span> be the set of sources (also called the <em>domain</em>) and <span class="math inline">\(T\)</span> be the set of possible targets (also called the <em>codomain</em>). Then, we can think of a function as a relation <span class="math inline">\(F \subseteq S \times T\)</span> of valid source-target pairs <span class="math inline">\((s, t)\)</span>, such that for every <span class="math inline">\(s \in S\)</span> in there exists a unique <span class="math inline">\(t \in T\)</span> with <span class="math inline">\((s, t) \in F\)</span> (see Figure <a href="mathematical-theory.html#fig:function-subset">4.2</a>). In other words, every source relates to exactly one target:</p>
<div class="figure"><span style="display:block;" id="fig:function-subset"></span>
<img src="_main_files/figure-html/function-subset-1.png" alt="A function is a type of relation. Specifically, it is a subset of the Cartesian product of its domain ($S$) and codomain ($T$), such that each element in the domain marks out exactly one element in the codomain (shown in red). The depicted function has the following characteristics: $F: \{ 1, 2, 3 \} \to \{ 1, 2, 3 \}$, such that $F(1) = 1$, $F(2) = 1$, and $F(3) = 2$. One possible example of a function which conforms to this diagram might be $f(x) = \lfloor x / 2 \rceil$ (divide $x$ by two and round to the nearest whole number). Note that, for any function, each source maps to exactly one target (exactly one dot in each column), however, some targets may not be reached from any source and others may be reachable from many sources (zero or multiple dots in any row)." width="2100" />
<p class="caption">
Figure 4.2: A function is a type of relation. Specifically, it is a subset of the Cartesian product of its domain (<span class="math inline">\(S\)</span>) and codomain (<span class="math inline">\(T\)</span>), such that each element in the domain marks out exactly one element in the codomain (shown in red). The depicted function has the following characteristics: <span class="math inline">\(F: \{ 1, 2, 3 \} \to \{ 1, 2, 3 \}\)</span>, such that <span class="math inline">\(F(1) = 1\)</span>, <span class="math inline">\(F(2) = 1\)</span>, and <span class="math inline">\(F(3) = 2\)</span>. One possible example of a function which conforms to this diagram might be <span class="math inline">\(f(x) = \lfloor x / 2 \rceil\)</span> (divide <span class="math inline">\(x\)</span> by two and round to the nearest whole number). Note that, for any function, each source maps to exactly one target (exactly one dot in each column), however, some targets may not be reached from any source and others may be reachable from many sources (zero or multiple dots in any row).
</p>
</div>
<p>We can classify functions based on the shape of the relation between the domain and the codomain (see Figure <a href="mathematical-theory.html#fig:function-types">4.3</a>). If every target in the function’s codomain has a path leading to it from some source, such that no target is unreachable, then we call the function <em>surjective</em> or <em>onto</em>. More formally:</p>
<div class="definition">
<p><span id="def:unlabeled-div-3" class="definition"><strong>Definition 4.3  (Surjectivity) </strong></span>A function <span class="math inline">\(f\)</span> is surjective if, for all <span class="math inline">\(t \in T\)</span>, there exists a <span class="math inline">\(s \in S\)</span> such that <span class="math inline">\(f(s) = t\)</span>.</p>
</div>
<p>Alternatively, if each source in the function’s domain leads to a unique target, such that no two sources map to the same target, then we call such a function <em>injective</em> or <em>one-to-one</em>. That is:</p>
<div class="definition">
<p><span id="def:unlabeled-div-4" class="definition"><strong>Definition 4.4  (Injectivity) </strong></span>A function is injective if, for all <span class="math inline">\(s_1, s_2 \in S\)</span>, if <span class="math inline">\(f(s_1) = t\)</span> and <span class="math inline">\(f(s_2) = t\)</span>, then <span class="math inline">\(s_1 = s_2\)</span>.</p>
</div>
<p>Finally, if a function is both surjective and injective, meaning that every target can be reached from, and only from, a unique source, then we call such a function <em>bijective</em> or a <em>bijection</em>.</p>
<div class="definition">
<p><span id="def:unlabeled-div-5" class="definition"><strong>Definition 4.5  (Bijectivity) </strong></span>A function is a bijection and only if it is both surjective and injective, which is also the case if and only if it is invertible.</p>
</div>
<div class="figure"><span style="display:block;" id="fig:function-types"></span>
<img src="_main_files/figure-html/function-types-1.png" alt="Types of functions. Left: in a *surjective* function, each target can be reached from some source. Middle: in an *injective* function, there is a unique source for each target. Right: in a *bijection*, each target can be reached from, and only from, a unique source." width="2100" />
<p class="caption">
Figure 4.3: Types of functions. Left: in a <em>surjective</em> function, each target can be reached from some source. Middle: in an <em>injective</em> function, there is a unique source for each target. Right: in a <em>bijection</em>, each target can be reached from, and only from, a unique source.
</p>
</div>
<div id="more-on-bijections" class="section level4 hasAnchor" number="4.0.2.1">
<h4><span class="header-section-number">4.0.2.1</span> More on bijections<a href="mathematical-theory.html#more-on-bijections" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Bijections are special since they encode the idea of reversible transformations. Any bijective function <span class="math inline">\(f\)</span> has an associated inverse <span class="math inline">\(f^{-1}\)</span> such that <span class="math inline">\(f^{-1}(f(x)) = x\)</span> and <span class="math inline">\(f(f^{-1}(y)) = y\)</span> for all <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> in the function’s domain and codomain, respectively. In other words, we can keep translating the value from the domain to codomain and back without losing any information. We will generalize this idea later when we discuss <em>isomorphisms</em>.</p>
<p>As an example, suppose I have a group of friends <span class="math inline">\(x \in X\)</span> that each went to one city <span class="math inline">\(y \in Y\)</span> in Europe during the holiday. I can construct a function <span class="math inline">\(f: X \to Y\)</span> that sends each friend to his or her holiday destination. If every city <span class="math inline">\(y \in Y\)</span> was visited by at least one friend, then the function is surjective. If each friend went to a different destination, then the function is injective. If both are true - that is, if every city on our list was visited by exactly one friend - then the function is bijective.</p>
<p>In the context of this example, a bijection means that we can just as well use the names of cities <span class="math inline">\(y \in Y\)</span> when we speak of friends <span class="math inline">\(x \in X\)</span>. If Sam went to Rome, and he is the only person who went to Rome, I can say “the person who went to Rome” and it will be clear who I am talking about. Thus, bijections apply interchangeability and reversibility. Conversely, a lack of bijection implies that a transformation may lead to information loss. If two people went to Rome and I say “the person who went to Rome”, I am inevitably discarding the information about the identity of that person.</p>
</div>
<div id="composition" class="section level4 hasAnchor" number="4.0.2.2">
<h4><span class="header-section-number">4.0.2.2</span> Composition<a href="mathematical-theory.html#composition" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>An important property of functions is that they can be composed. Specifically, if the domain of one function matches the codomain of another, the functions can be composed by piping the output of the first function as the input of the second. We then end up with a new, composite function:</p>
<div class="definition">
<p><span id="def:unlabeled-div-6" class="definition"><strong>Definition 4.6  (Function composition) </strong></span>Given two functions <span class="math inline">\(f: X \to Y\)</span> and <span class="math inline">\(g: Y \to Z\)</span>, we can form a new function <span class="math inline">\(h: X \to Z\)</span> by composing the two functions together such that:</p>
<p><span class="math display">\[h(x) = g(f(x))\]</span></p>
<p>There are several different ways to denote function composition. One is to write out the composition explicitly using the variable <span class="math inline">\(x\)</span> as in the example above. However, mathematical texts often omit the explicit reference to the variable (<span class="math inline">\(x\)</span>) and write the composition in one of several ways:</p>
<ol style="list-style-type: decimal">
<li><span class="math inline">\(h = g \circ f\)</span> (read: “apply <span class="math inline">\(g\)</span> after <span class="math inline">\(f\)</span>”)</li>
<li><span class="math inline">\(h = gf\)</span> (same as above)</li>
<li><span class="math inline">\(h = f ⨾ g\)</span> (read “apply <span class="math inline">\(f\)</span> then <span class="math inline">\(g\)</span>”)</li>
</ol>
</div>
<p>Throughout this thesis, I will use the bracket notation (<span class="math inline">\(h(x) = g(f(x))\)</span>) when explicitly referring to the variable, and the postfix/fat semicolon notation (<span class="math inline">\(h = f ⨾ g\)</span>) otherwise.</p>
<p>Surjectivity, injectivity, and bijectivity propagate through composition: composition of two surjective functions is surjective, composition of two injective functions is injective, and composition of two bijective functions is bijective. However, the converse does not necessarily hold: a bijective function does not have to be composed of two bijections:</p>
<div class="figure"><span style="display:block;" id="fig:bijection"></span>
<img src="_main_files/figure-html/bijection-1.png" alt="A bijection does not necessarily have to be composed of bijections. The function $f$ is not surjective, and the function $g$ is not injective, nevertheless, their composition $f ⨾ g$ yields a bijective function." width="2100" />
<p class="caption">
Figure 4.4: A bijection does not necessarily have to be composed of bijections. The function <span class="math inline">\(f\)</span> is not surjective, and the function <span class="math inline">\(g\)</span> is not injective, nevertheless, their composition <span class="math inline">\(f ⨾ g\)</span> yields a bijective function.
</p>
</div>
<p>For other interesting examples of inverse function composition problems, see <span class="citation">Lawvere and Schanuel (<a href="#ref-lawvere2009">2009</a>)</span>.</p>
</div>
<div id="the-image-and-the-pre-image" class="section level4 hasAnchor" number="4.0.2.3">
<h4><span class="header-section-number">4.0.2.3</span> The image and the pre-image<a href="mathematical-theory.html#the-image-and-the-pre-image" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>There are other things we can do with functions. For example, given a subset of sources, we can ask about the <em>image</em> - the set of targets we can reach from those sources:</p>
<div class="definition">
<p><span id="def:unlabeled-div-7" class="definition"><strong>Definition 4.7  (Image) </strong></span>For some subset <span class="math inline">\(S_i \subseteq S\)</span>, its image under <span class="math inline">\(f\)</span> is defined as <span class="math inline">\(f_!(S_i) = \{ f(s) \in T \lvert s \in S_i \}\)</span>.</p>
</div>
<p>Likewise, given a subset of targets, we can ask about the <em>pre-image</em> - the set of sources that could have produced those targets. That is:</p>
<div class="definition">
<p><span id="def:unlabeled-div-8" class="definition"><strong>Definition 4.8  (Pre-image) </strong></span>For some subset <span class="math inline">\(T_i \subseteq T\)</span>, its pre-image under <span class="math inline">\(f\)</span> is defined as <span class="math inline">\(f^*(T_i) = \{ s \in S \lvert f(s) \in T_i \}\)</span>.</p>
</div>
<p>An important fact to note is that, although the pre-image <span class="math inline">\(f^*\)</span> is also sometimes called the “inverse image”, it is <em>not</em> the inverse of the image <span class="math inline">\(f_!\)</span>, for most functions (ones which are not bijections). That is, by applying the pre-image after image or vice versa, we cannot expect to always come up with the same set as we started with. Specifically, if we have a non-injective function and apply the pre-image after the image, we may come up with <em>more</em> sources that we started with, <span class="math inline">\(S_i \subseteq f^*(f_!(S_i))\)</span> (equality if injective), and similarly, if we have a non-surjective function and apply the image after the pre-image, we might end up with <em>fewer</em> targets than we started with, <span class="math inline">\(f_!(f^*(T_i)) \subseteq T_i\)</span> (again, equality if surjective).</p>
<p>As an example, suppose again I have the function <span class="math inline">\(f\)</span> which maps each friend to a holiday destination. The image of that function, <span class="math inline">\(f_!\)</span>, maps a set of friends to the set of all cities that at least one of them went to, and similarly, the pre-image, <span class="math inline">\(f^*\)</span>, maps a set of cities to the set of friends that went to them.<br />
Now, suppose that Sam and Dominic went to Rome, and I ask:</p>
<blockquote>
<p><em>“who went to [the city that Sam went to]?”</em></p>
</blockquote>
<p>I will get both Sam and Dominic back, since:</p>
<p><span class="math display">\[f^*(f_!(\{ Sam \})) = f^*(\{ Rome \}) = \{ Sam, Dominic \}\]</span></p>
<p>That is, I will get back Sam and Dominic <em>even though I had initially only asked about Sam</em>. Similarly, if no friends had visited Paris and I ask:</p>
<blockquote>
<p><em>“what are the cities that [people who went to Paris or Rome] went to?”</em></p>
</blockquote>
<p>then I will get Rome only, since</p>
<p><span class="math display">\[f_!(f^*(\{Paris, Rome \})) = f_!(\{ Sam, Dominic \}) = \{ Rome \}\]</span></p>
<p>This odd relationship between the the image and the pre-image is due to the fact that the image is actually something called <em>left adjoint</em> <span class="citation">(<a href="#ref-baez2023">Baez 2023</a>; <a href="#ref-fong2019">Fong and Spivak 2019</a>)</span>. Adjoints can be thought of as the “best approximate answer to a problem that has no solution” <span class="citation">(no inverse, <a href="#ref-baez2023">Baez 2023</a>)</span>, and they come in pairs - a left and a right adjoint - with the left adjoint being more permissive or “liberal” and the right adjoint being more strict or “conservative” <span class="citation">(<a href="#ref-baez2023">Baez 2023</a>)</span>.</p>
<p>Proper treatment of adjoints is beyond the scope of this thesis, however.</p>
</div>
</div>
<div id="partitions" class="section level3 hasAnchor" number="4.0.3">
<h3><span class="header-section-number">4.0.3</span> Partitions<a href="mathematical-theory.html#partitions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Another interesting simple mathematical constructions are partitions. Like functions, partitions are a type of relation, and can in fact be constructed using functions. That is, if we have a “labeling” function <span class="math inline">\(f\)</span>, we can construct a partition as follows:</p>
<div class="definition">
<p><span id="def:unlabeled-div-9" class="definition"><strong>Definition 4.9  (Function definition of a partition) </strong></span>Given some set <span class="math inline">\(X\)</span>, a set of part labels <span class="math inline">\(P\)</span>, and a surjective function <span class="math inline">\(f: X \to P\)</span>, we can partition <span class="math inline">\(A\)</span> by assigning every element <span class="math inline">\(x \in X\)</span> a part label <span class="math inline">\(p \in P\)</span>, by simply applying the function: <span class="math inline">\(f(x) = p\)</span>.</p>
</div>
<p>We can also define partitions using equivalence classes. By taking any part label <span class="math inline">\(p \in P\)</span>, we can recover the corresponding subset of <span class="math inline">\(X\)</span> by pulling out its pre-image: <span class="math inline">\(f^*(\{p\}) = X_p \subseteq X\)</span>. We can then define a partition without reference to <span class="math inline">\(f\)</span>:</p>
<div class="definition">
<p><span id="def:unlabeled-div-10" class="definition"><strong>Definition 4.10  (Equivalence class definition of a partition) </strong></span>A partition of <span class="math inline">\(A\)</span> consists of a set of part labels <span class="math inline">\(P\)</span>, such that, for all <span class="math inline">\(p \in P\)</span>, there is a non-empty subset <span class="math inline">\(A_p \subseteq A\)</span> which forms an equivalence class on <span class="math inline">\(A\)</span> and:</p>
<p><span class="math display">\[X = \bigcup_{p \in P} X_p \qquad \text{and} \qquad \text{if } p \neq q, \text{ then } X_p \cap X_q = \varnothing\]</span>
I.e. the parts <span class="math inline">\(X_p\)</span> jointly cover the entirety of <span class="math inline">\(X\)</span> and parts cannot share any elements.</p>
</div>
<p>We can rank partitions by their coarseness. That is, for any set <span class="math inline">\(X\)</span>, the coarsest partition is one with only one part label <span class="math inline">\(P = \{ 1 \}\)</span>, such that each element of <span class="math inline">\(X\)</span> gets assigned <span class="math inline">\(1\)</span> as label. Conversely, the finest partition is one where each element gets assigned its own unique part label, such that <span class="math inline">\(\lvert X \lvert = \lvert P \lvert\)</span>.</p>
<p>Given two partitions, we can form a finer (or at least as fine) partition by taking their intersection, i.e. by taking the set of all unique pairs of labels that co-occur for any <span class="math inline">\(x \in X\)</span> as the new part labels. For example, suppose <span class="math inline">\(X = \{ 1, 2, 3 \}\)</span> and partition 1 assigns part labels:</p>
<p><span class="math display">\[p_1(x) = \begin{cases}
a &amp; \text{if } x = 1 \text{ or } x = 2 \\
b &amp; \text{if } x = 3
\end{cases}\]</span></p>
<p>and partition 2 assigns part labels the following way:</p>
<p><span class="math display">\[
p_2(a) = \begin{cases}
s &amp; \text{if } x = 1 \\
t &amp; \text{if } x = 2 \text{ or } x = 3
\end{cases}
\]</span></p>
<p>Then the intersection partition will have the following part labels <span class="math inline">\(P_3 = \{ (a, s), (a, t), (b, t) \}\)</span> such that:</p>
<p><span class="math display">\[
p_3(a) = \begin{cases}
(a, s) &amp; \text{if } x = 1 \\
(b, s) &amp; \text{if } x = 2 \\
(b, t) &amp; \text{if } x = 3
\end{cases}
\]</span></p>
</div>
<div id="preorders" class="section level3 hasAnchor" number="4.0.4">
<h3><span class="header-section-number">4.0.4</span> Preorders<a href="mathematical-theory.html#preorders" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Another important class of relations are ones that have to do with order. Among these, one of the simplest constructions is a preorder:</p>
<div class="definition">
<p><span id="def:unlabeled-div-11" class="definition"><strong>Definition 4.11  (Preorder) </strong></span>A preorder is a set <span class="math inline">\(X\)</span> equipped with a binary relation <span class="math inline">\(\leq\)</span> that conforms to the following two properties:</p>
<ol style="list-style-type: decimal">
<li><em>Reflexivity</em>: <span class="math inline">\(x \leq x\)</span> for all <span class="math inline">\(x \in X\)</span></li>
<li><em>Transitivity</em>: if <span class="math inline">\(x \leq y\)</span> and <span class="math inline">\(y \leq z\)</span>, then <span class="math inline">\(x \leq z\)</span>, for all <span class="math inline">\(x, y, z \in X\)</span></li>
</ol>
</div>
<p>Simply speaking, this means that, if we pick any two elements in the set <span class="math inline">\(X\)</span>, they either relate and one element is “less than or equal to” the other, in some sense, or they do not relate at all.</p>
<p>One simple example of a preorder is the family tree, see Figure <a href="mathematical-theory.html#fig:family-tree">4.5</a>. Here, the underlying set is the family: <span class="math inline">\(X = \{  daughter, son, mother, father, grandmother, ... \}\)</span> and the binary relation is ancestry or familial relation. Thus, for example, <span class="math inline">\(daughter \leq father\)</span>, since the daughter is related to (is offspring of) the father, and <span class="math inline">\(father \leq father\)</span>, since a person is related to themselves (for the sake of this example). However, there is no relation (<span class="math inline">\(\leq\)</span>) between <span class="math inline">\(father\)</span> and <span class="math inline">\(mother\)</span> since they are not related. Finally, since <span class="math inline">\(daughter \leq father\)</span> and <span class="math inline">\(father \leq grandmother\)</span>, then, by reflexivity, <span class="math inline">\(daughter \leq grandmother\)</span>.</p>
<div class="figure"><span style="display:block;" id="fig:family-tree"></span>
<img src="_main_files/figure-html/family-tree-1.png" alt="An example of a simple preorder: family tree ordered by familial relation." width="672" />
<p class="caption">
Figure 4.5: An example of a simple preorder: family tree ordered by familial relation.
</p>
</div>
<p>Another common example of a preorder is the set of natural numbers <span class="math inline">\(\mathbb{N}\)</span>, ordered by the usual order relation, or by the division relation: <span class="math inline">\(x \leq y\)</span> iff <span class="math inline">\(x \mid y\)</span> (<span class="math inline">\(x\)</span> divides <span class="math inline">\(y\)</span> without remainder).</p>
<div id="specializing-preorders" class="section level4 hasAnchor" number="4.0.4.1">
<h4><span class="header-section-number">4.0.4.1</span> Specializing preorders<a href="mathematical-theory.html#specializing-preorders" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We can specialize preorders by imposing additional properties, such as:</p>
<ol start="3" style="list-style-type: decimal">
<li>If <span class="math inline">\(x \leq y\)</span> and <span class="math inline">\(y \leq x\)</span>, then <span class="math inline">\(x = y\)</span> (anti-symmetry)</li>
<li>Either <span class="math inline">\(x \leq y\)</span> or <span class="math inline">\(y \leq x\)</span> (comparability)</li>
</ol>
<p>If a preorder conforms to property 3, we speak of a partially ordered set or <em>poset</em>. If it conforms to both 3 and 4, then it is called a <em>total order</em>.</p>
</div>
<div id="preserving-structure-monotone-maps" class="section level4 hasAnchor" number="4.0.4.2">
<h4><span class="header-section-number">4.0.4.2</span> Preserving structure: Monotone maps<a href="mathematical-theory.html#preserving-structure-monotone-maps" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Preorders are interesting because they give us a first taste of something will be discussed a lot throughout this thesis: structure-preserving maps. Specifically, if we have two preorders <span class="math inline">\((X, \leq_X)\)</span> and <span class="math inline">\((Y, \leq_Y)\)</span>, and a set of functions <span class="math inline">\(F\)</span> which map values between <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span>, we can classify the functions in <span class="math inline">\(F\)</span> by whether they preserve the order in <span class="math inline">\(X\)</span> or not. That is, we call a function <span class="math inline">\(f \in F\)</span> order-preserving or a “monotone map”, if:</p>
<div class="definition">
<p><span id="def:unlabeled-div-12" class="definition"><strong>Definition 4.12  (Monotone map) </strong></span>A monotone map <span class="math inline">\(f: X \to Y\)</span> is a function between two preorders <span class="math inline">\((X, \leq_X)\)</span> and <span class="math inline">\((Y, \leq_Y)\)</span>, such that, for all <span class="math inline">\(x_1, x_2 \in X\)</span>:</p>
<p><span class="math display">\[\text{if} \;\; x_1 \leq_X x_2 \;\; \text{then} \;\; f(x_1) \leq_Y f(x_2) \]</span></p>
</div>
<p>For example, suppose we have a set of functions mapping between the set of natural numbers ordered by the usual order relation, <span class="math inline">\((\mathbb{N}, \leq)\)</span>, and the set of reals, again ordered by the usual order relation <span class="math inline">\((\mathbb{R}, \leq)\)</span>. Then the function <span class="math inline">\(f(x) = \log(x)\)</span> is a monotone map, since:</p>
<p><span class="math display">\[\text{if} \;\; x_1 \leq_{\mathbb{N}} x_2 \;\; \text{then} \;\; \log(x_1) \leq_{\mathbb{R}} \log(x_2)\]</span></p>
<p>However, there are many other types of functions which do not preserve order, e.g. <span class="math inline">\(g(x) = \sin(x)\)</span> or <span class="math inline">\(h(x) = -x\)</span>. As another example, if we take as our domain the powerset of some set <span class="math inline">\(X\)</span>, ordered by inclusion relation, <span class="math inline">\((\mathcal{P}(X), \leq)\)</span>, then one order preserving map is the cardinality of the sets.</p>
<p>Monotone maps compose: if <span class="math inline">\(f: X \to Y\)</span> is a monotone map, and <span class="math inline">\(g: Y \to Z\)</span> is a monotone map, then their composite <span class="math inline">\(h: X \to Z\)</span> is also a monotone map.</p>
</div>
</div>
<div id="monoids" class="section level3 hasAnchor" number="4.0.5">
<h3><span class="header-section-number">4.0.5</span> Monoids<a href="mathematical-theory.html#monoids" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In the previous subsection, we discussed one example of taking a set and imposing some kind of structure on it: namely, we took a set and imposed an order relation on it and called the result a preorder. However, we can impose many other kinds of structure on collections of objects (sets). One such type of a structure is a monoid.</p>
<p>A monoid is an algebraic structure that represents a “whole equal to the sum of its parts”, if we relax our idea about what it means to “sum”. More formally:</p>
<div class="definition">
<p><span id="def:unlabeled-div-13" class="definition"><strong>Definition 4.13  (Monoid) </strong></span>A monoid is a tuple <span class="math inline">\((M, e, \otimes)\)</span> consisting of:</p>
<ul>
<li>A set of objects <span class="math inline">\(M\)</span></li>
<li>A neutral element <span class="math inline">\(e\)</span> called the <em>monoidal unit</em></li>
<li>A binary operation (function) <span class="math inline">\(\otimes: M \times M \to M\)</span> called the <em>monoidal product</em></li>
</ul>
<p>Such that the binary operation <span class="math inline">\(\otimes\)</span> has the following properties:</p>
<ol style="list-style-type: decimal">
<li>Unitality: <span class="math inline">\(m \otimes e = e \otimes m = m\)</span> for all <span class="math inline">\(m \in M\)</span></li>
<li>Associativity: <span class="math inline">\(m_1 \otimes (m_2 \otimes m_3) = (m_1 \otimes m_2) \otimes m_3 = m_1 \otimes m_2 \otimes m_3\)</span> for all <span class="math inline">\(m_1, m_2, m_3 \in M\)</span></li>
</ol>
</div>
<p>In simple terms, when we have a monoid <span class="math inline">\((M, \otimes, e)\)</span>, we have some elements <span class="math inline">\(m \in M\)</span> and a way to combine them, such that, when we combine the same group of elements, we always get back the same result, no matter in what order we do it in (associativity: brackets do not matter). We also have some neutral element <span class="math inline">\(e\)</span> that, when combined with any other element, does nothing and simply yields back the original element.</p>
<div class="theorem">
<p><span id="thm:unlabeled-div-14" class="theorem"><strong>Theorem 4.1  (Uniqueness of the neutral element) </strong></span>The neutral element in a monoid is always unique.</p>
</div>
<p>Proof: suppose <span class="math inline">\(e_1\)</span> and <span class="math inline">\(e_2\)</span> are elements in <span class="math inline">\(M\)</span> that have the unital property. Then <span class="math inline">\(e_1 \otimes e_2 = e_1\)</span> but also <span class="math inline">\(e_1 \otimes e_2 = e_2\)</span> (treating either as “the” neutral element). So, <span class="math inline">\(e_1 = e_2\)</span>.</p>
<div id="simple-examples-of-monoids" class="section level4 hasAnchor" number="4.0.5.1">
<h4><span class="header-section-number">4.0.5.1</span> Simple examples of monoids<a href="mathematical-theory.html#simple-examples-of-monoids" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>One common example of a monoid is summation on natural numbers (including zero), <span class="math inline">\((\mathbb{N}, 0, +)\)</span>:</p>
<span class="math display">\[\begin{aligned}

1 + 0 = 0 + 1 = 1 &amp; \qquad \text{(unitality)} \\
1 + (2 + 3) = (1 + 2) + 3 = 1 + 2 + 3 &amp; \qquad \text{(associativity)}

\end{aligned}\]</span>
<p>Another example of a monoid are products of real numbers <span class="math inline">\((\mathbb{R}, 1, \times)\)</span>:</p>
<span class="math display">\[\begin{aligned}

1 \cdot 2 = 2 \cdot 1 = 2 &amp; \qquad \text{(unitality)} \\
1 \cdot (2 \cdot 3) = (1 \cdot 2) \cdot 3 = 1 \cdot 2 \cdot 3 &amp; \qquad \text{(associativity)}

\end{aligned}\]</span>
<p>However, not every mathematical operation forms a monoid. One counterexample is exponentiation. Exponentiation does not meet the definition of a monoid, since it is not associative:</p>
<p><span class="math display">\[x^{(y^z)} \neq (x^y)^z\]</span></p>
<p>and there is no two-sided neutral element:</p>
<p><span class="math display">\[x^1 = x \qquad \text{but} \qquad 1^x \neq x\]</span></p>
<p>Likewise, the operation of taking an average of two numbers is not associative:</p>
<p><span class="math display">\[\frac{\frac{x + y}{2} + z}{2} \neq \frac{x + \frac{y + z}{2}}{2} \\\]</span></p>
<p>And there is no neutral element since there is no number that we could average <span class="math inline">\(x\)</span> with to get back the same value (that does not depend on <span class="math inline">\(x\)</span>):</p>
<p><span class="math display">\[\not\exists c \; \text{s.t.} \; \frac{x + c}{2} = x\]</span></p>
<p>Therefore, the average operator is not a monoid either.</p>
</div>
<div id="beyond-numbers" class="section level4 hasAnchor" number="4.0.5.2">
<h4><span class="header-section-number">4.0.5.2</span> Beyond numbers<a href="mathematical-theory.html#beyond-numbers" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>However, the definition of a monoid is broader than just simple operations on numbers, and can extend to far more exotic structures. For example, multiplication of <span class="math inline">\(n \times n\)</span> square matrices <span class="math inline">\((\mathbf{M}_{n \in \mathbb{Z}}, \mathbf{I}, \cdot)\)</span>, is a monoid. Also, the operation of appending a value to a vector and taking the Euclidean norm can too be recast as a monoid <span class="citation">(<a href="#ref-stepanov2009">Stepanov and McJones 2009</a>)</span>:</p>
<p><span class="math display">\[||(||(x, y)||_2, z)||_2 = \sqrt{\bigg(\sqrt{(x^2 + y^2)}\bigg)^2 + z^2} = \sqrt{(x^2 + y^2) + z^2} = ||(x, y, z)||_2\]</span></p>
<p>Even completely non-number like entities can form monoids. For example, the operation of concatenating strings is a monoid, since it is associative and comes equipped with a neutral element (the empty string):</p>
<span class="math display">\[\begin{aligned}

\text{&quot;hello&quot;} + \text{&quot;&quot;} = \text{&quot;&quot;} + \text{&quot;hello&quot;} = \text{&quot;hello&quot;} &amp; \qquad \text{(unitality)} \\
(\text{&quot;quick&quot;} + \text{&quot;brown&quot;}) + \text{&quot;fox&quot;} = \text{&quot;quick&quot;} + (\text{&quot;brown&quot;} + \text{&quot;fox&quot;}) &amp; \qquad \text{(associativity)}

\end{aligned}\]</span>
</div>
<div id="specializing-monoids" class="section level4 hasAnchor" number="4.0.5.3">
<h4><span class="header-section-number">4.0.5.3</span> Specializing monoids<a href="mathematical-theory.html#specializing-monoids" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>As with <a href="#Preorders">preorders</a>, we can make more specialized version of monoids by imposing additional properties. One such property is commutativity:</p>
<ol start="3" style="list-style-type: decimal">
<li>Commutativity: <span class="math inline">\(m_1 \otimes m_2 = m_2 \otimes m_1\)</span> for all <span class="math inline">\(m_1, m_2 \in M\)</span></li>
</ol>
<p>Both associativity and commutativity can both be viewed as saying “order does not matter” in some sense, however, they are fundamentally different. While associativity is about the “temporal” order of operations, commutativity is about the “spatial” order of terms. Let’s illustrate this on an example.</p>
<p>Suppose we have three wires of different colours <span class="math inline">\(\{ \text{red}, \text{green}, \text{blue} \}\)</span>. We can connect these wires, and let’s call this operation our monoidal product. Let’s also imagine that the <span class="math inline">\(\text{red}\)</span> wire is connected to a power source and the <span class="math inline">\(\text{blue}\)</span> wire is connected to a light bulb, and the <span class="math inline">\(\text{green}\)</span> wire amplifies the current from the power source such that it is enough to power the light bulb. To turn on the lightbulb, we need to connect the wires in the following order: <span class="math inline">\(\text{red} \to \text{green} \to \text{blue}\)</span>. The temporal order in which we do this does not matter: we can connect <span class="math inline">\(\text{green} \to \text{blue}\)</span> first and <span class="math inline">\(\text{red} \to \text{green}\)</span> second or vice versa, either way we get the same result (the lightbulb turns on). However, the spatial order in which we connect the wires <em>does</em> matter: if we connect <span class="math inline">\(\text{red} \to \text{blue}\)</span>, then the current will not be enough to power the light bulb. Hence, the operation is associative (temporal order does not matter) but not commutative (spatial order matters).</p>
<p>Further interesting kinds of structure can arise when the set <span class="math inline">\(M\)</span> is itself a part of a preorder <span class="math inline">\((M, \leq)\)</span>. Then, we may want the monoidal product to be monotonic, such that it does not break the ordering imposed by <span class="math inline">\(\leq\)</span>:</p>
<ol start="4" style="list-style-type: decimal">
<li>Monotonicity: <span class="math inline">\(m_1 \leq m_1 \otimes m_2\)</span> and <span class="math inline">\(m_2 \leq m_1 \otimes m_2\)</span> for all <span class="math inline">\(m_1, m_2 \in M\)</span></li>
</ol>
<p>This means that when we combine two things, we get back something that’s at least as big as the bigger of the two things. Summation of natural numbers <span class="math inline">\((\mathbb{N}, \leq, 0, +)\)</span> again works, but for example summation of integers <span class="math inline">\((\mathbb{Z}, 0, +)\)</span> or multiplication of reals <span class="math inline">\((\mathbb{R}, \leq, 1, \times)\)</span> does not.</p>
<p>Mathematicians tend to give these structures with different sets of properties different names. For example, the tuple <span class="math inline">\((M, \leq, e, \otimes)\)</span>, where the monoidal product <span class="math inline">\(\otimes\)</span> has the properties of unitality, associativity, commutativity, and monotonicity is called a symmetric monoidal preorder <span class="citation">(<a href="#ref-fong2019">Fong and Spivak 2019</a>)</span>. For our purposes here, I will not dive too deep into this taxonomy, however, interested reader should consult <span class="citation">Fong and Spivak (<a href="#ref-fong2019">2019</a>)</span> or <a href="https://ncatlab.org/nlab/show/HomePage">nLab</a>.</p>
</div>
<div id="structure-preserving-maps-monoid-homomorphisms" class="section level4 hasAnchor" number="4.0.5.4">
<h4><span class="header-section-number">4.0.5.4</span> Structure preserving maps: Monoid homomorphisms<a href="mathematical-theory.html#structure-preserving-maps-monoid-homomorphisms" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>As with preorders, when we have functions which map from one monoid to another, we can ask whether they preserve properties we care about. Before, this was order; now, we want the operations to preserve the fundamental properties of the monoidal product, unitality and associativity:</p>
<div class="definition">
<p><span id="def:unlabeled-div-15" class="definition"><strong>Definition 4.14  (Monoid homomorphism) </strong></span>Let <span class="math inline">\((M, e_M, \otimes_M)\)</span> and <span class="math inline">\((N, e_N, \otimes_N)\)</span> be monoids. A function <span class="math inline">\(f: M \to N\)</span> is called a monoid homomorphism if it:</p>
<ol style="list-style-type: decimal">
<li>Preserves product: <span class="math inline">\(f(m_1 \otimes_M m_2) = f(m_1) \otimes_N f(m_2)\)</span></li>
<li>Preserves unitality: <span class="math inline">\(f(e_M) = e_N\)</span></li>
</ol>
</div>
<p>(technically, 2. can be deduced from 1., if we let <span class="math inline">\(m_1\)</span> or <span class="math inline">\(m_2\)</span> equal <span class="math inline">\(e_M\)</span>)</p>
<p>To give an example of a monoid homomorphism, suppose that our first monoid is string concatenation, <span class="math inline">\((String, &quot;&quot;, ++)\)</span> and the second is natural numbers with addition, <span class="math inline">\((\mathbb{N}, 0, +)\)</span>. Then, one simple monoid homomorphism <span class="math inline">\(f\)</span> is simply counting the number of characters in a string:</p>
<p><span class="math display">\[10 = f(\text{&quot;helloworld&quot;}) = f(\text{&quot;hello&quot;} \text{++} \text{&quot;world&quot;}) = f(\text{&quot;hello&quot;}) + f(\text{&quot;world&quot;}) = 5 + 5\]</span>
<span class="math display">\[e_N = 0 = f(&quot;&quot;) = f(e_M)\]</span></p>
</div>
</div>
<div id="groups" class="section level3 hasAnchor" number="4.0.6">
<h3><span class="header-section-number">4.0.6</span> Groups<a href="mathematical-theory.html#groups" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Another well-known example of algebraic structures are groups. Groups are studied in group theory, and encode the idea of reversible transformations. Despite the different term, groups are really just a monoid with one additional property.</p>
<div class="definition">
<p><span id="def:unlabeled-div-16" class="definition"><strong>Definition 4.15  (Group) </strong></span>A group is a monoid with an inverse operator. Specifically, as with a monoid, we have the tuple <span class="math inline">\((M, e, \otimes)\)</span>, which includes the set <span class="math inline">\(M\)</span>, the neutral element <span class="math inline">\(e\)</span>, and the product <span class="math inline">\(\otimes\)</span>, and the product fullfills the following properties:</p>
<ol style="list-style-type: decimal">
<li>Unitality: <span class="math inline">\(m \otimes e = e \otimes m = m\)</span>, for all <span class="math inline">\(m \in M\)</span></li>
<li>Associativity: <span class="math inline">\(m_1 \otimes (m_2 \otimes m_3) = (m_1 \otimes m_2) \otimes m_3 = m_1 \otimes m_2 \otimes m_3\)</span>, for all <span class="math inline">\(m_1, m_2, m_3 \in M\)</span></li>
</ol>
<p>Additionally, the monoidal product <span class="math inline">\(\otimes\)</span> has an inverse <span class="math inline">\(\otimes^{-1}\)</span>, such that the following property holds<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>:</p>
<ol start="3" style="list-style-type: decimal">
<li>Invertibility: <span class="math inline">\(m \otimes^{-1} m = e\)</span>, for all <span class="math inline">\(m \in M\)</span></li>
</ol>
</div>
</div>
<div id="categories" class="section level3 hasAnchor" number="4.0.7">
<h3><span class="header-section-number">4.0.7</span> Categories<a href="mathematical-theory.html#categories" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>While discussing mathematical structures like preorders, monoids, and groups, some common have been cropping up: namely, structure and structure-preserving maps. Now it is time to shift gears and define these common themes more generally. To do this, we can make use of one powerful concept: categories <span class="citation">(<a href="#ref-fong2019">Fong and Spivak 2019</a>; <a href="#ref-lawvere2009">Lawvere and Schanuel 2009</a>)</span>.</p>
<div class="definition">
<p><span id="def:unlabeled-div-17" class="definition"><strong>Definition 4.16  (Category) </strong></span>To define a category <span class="math inline">\(\mathcal{C}\)</span>, we specify:</p>
<ul>
<li>A collection of objects <span class="math inline">\(\text{Ob}(\mathcal{C})\)</span></li>
<li>For every two objects <span class="math inline">\(c, d \in \text{Ob}(\mathcal{C})\)</span>, we define a set of morphisms (arrows) <span class="math inline">\(\mathcal{C}(c, d)\)</span></li>
<li>For any object <span class="math inline">\(c \in \text{Ob}(\mathcal{C})\)</span>, we define a special morphism <span class="math inline">\(\text{id}_c \in \mathcal{C}(c, c)\)</span>, called the identity morphism</li>
<li>For every three objects <span class="math inline">\(c_1, c_2, c_3 \in \text{Ob}(\mathcal{C})\)</span> and two morphisms <span class="math inline">\(f \in \mathcal{C}(c_1, c_2)\)</span> and <span class="math inline">\(g \in \mathcal{C}(c_2, c_3)\)</span>, we define a composite morphism <span class="math inline">\(f ⨾ g \in \mathcal{C}(c_1, c_3)\)</span></li>
</ul>
<p>Such that the composition operation is:</p>
<ol style="list-style-type: decimal">
<li>Unital: <span class="math inline">\(\text{id}_{c_1} ⨾ f = f\)</span> and <span class="math inline">\(f ⨾ \text{id}_{c_2}=f\)</span></li>
<li>Associative: <span class="math inline">\((f ⨾ g)⨾ h = f ⨾ (g ⨾ h) = f ⨾ g ⨾ h\)</span></li>
</ol>
<p>(for all <span class="math inline">\(f \in \mathcal{C}(c_1, c2)\)</span>, <span class="math inline">\(g \in \mathcal{C}(c_2, c3)\)</span>, and <span class="math inline">\(f \in \mathcal{C}(c_3, c4)\)</span>, and <span class="math inline">\(c_1, c_2, c_3, c_4 \in \text{Ob}(\mathcal{C})\)</span>)</p>
</div>
<p>The definition above may look daunting, because of the introduction of new notation and the use of abstract terms like “collection”, “objects”, and “morphisms”. However, it is really nothing new. To simplify things, we can think of the collection of objects as a set, and the morphisms/arrows as functions, and we retain most of the original meaning; the abstract definition above simply gives us more flexibility.</p>
<p>In other words, all that the definition of a category says is that we have some objects <span class="math inline">\(c \in \text{Ob}(\mathcal{C})\)</span> which relate to each other via morphisms, and these morphisms obey some common sense properties. First, the morpshisms compose: if we can get from <span class="math inline">\(c_1\)</span> to <span class="math inline">\(c_2\)</span> and <span class="math inline">\(c_2\)</span> to <span class="math inline">\(c_3\)</span>, we can get from <span class="math inline">\(c_1\)</span> to <span class="math inline">\(c_3\)</span>. Second the composition is associative, meaning that the order in which we compose does not matter. Finally, we always have a way of “staying in the same place”, which is the identity morphism.</p>
</div>
<div id="functors" class="section level3 hasAnchor" number="4.0.8">
<h3><span class="header-section-number">4.0.8</span> Functors<a href="mathematical-theory.html#functors" class="anchor-section" aria-label="Anchor link to header"></a></h3>

</div>
</div>
<h3> References<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-baez2023" class="csl-entry">
Baez, John. 2023. <span>“<span>Applied Category Theory Course</span>.”</span> <a href="https://math.ucr.edu/home/baez/act_course">https://math.ucr.edu/home/baez/act_course</a>.
</div>
<div id="ref-beckmann1995" class="csl-entry">
Beckmann, Peter E. 1995. <span>“On the Problem of Visualizing Point Distributions in High Dimensional Spaces.”</span> <em>Computers &amp; Graphics</em> 19 (4): 617–29.
</div>
<div id="ref-fong2019" class="csl-entry">
Fong, Brendan, and David I Spivak. 2019. <em>An Invitation to Applied Category Theory: Seven Sketches in Compositionality</em>. Cambridge University Press.
</div>
<div id="ref-hibbard1994" class="csl-entry">
Hibbard, William L, Charles R Dyer, and Brian E Paul. 1994. <span>“A Lattice Model for Data Display.”</span> In <em>Proceedings Visualization’94</em>, 310–17. IEEE.
</div>
<div id="ref-hutchins1999" class="csl-entry">
Hutchins, Matthew A. 1999. <em>Modelling Visualisation Using Formal Algebra</em>. Australian National University.
</div>
<div id="ref-kindlmann2014" class="csl-entry">
Kindlmann, Gordon, and Carlos Scheidegger. 2014. <span>“An Algebraic Process for Visualization Design.”</span> <em>IEEE Transactions on Visualization and Computer Graphics</em> 20 (12): 2181–90.
</div>
<div id="ref-lawvere2009" class="csl-entry">
Lawvere, F William, and Stephen H Schanuel. 2009. <em>Conceptual Mathematics: A First Introduction to Categories</em>. Cambridge University Press.
</div>
<div id="ref-milewski2018" class="csl-entry">
Milewski, Bartosz. 2018. <em>Category Theory for Programmers</em>. Blurb.
</div>
<div id="ref-petricek2021" class="csl-entry">
Petricek, Tomas. 2021. <span>“Composable Data Visualizations.”</span> <em>Journal of Functional Programming</em> 31: e13.
</div>
<div id="ref-pinter2010" class="csl-entry">
Pinter, Charles C. 2010. <em>A Book of Abstract Algebra</em>. Courier Corporation.
</div>
<div id="ref-smeltzer2018" class="csl-entry">
Smeltzer, Karl, and Martin Erwig. 2018. <span>“A Domain-Specific Language for Exploratory Data Visualization.”</span> In <em>Proceedings of the 17th ACM SIGPLAN International Conference on Generative Programming: Concepts and Experiences</em>, 1–13.
</div>
<div id="ref-smeltzer2014" class="csl-entry">
Smeltzer, Karl, Martin Erwig, and Ronald Metoyer. 2014. <span>“A Transformational Approach to Data Visualization.”</span> In <em>Proceedings of the 2014 International Conference on Generative Programming: Concepts and Experiences</em>, 53–62.
</div>
<div id="ref-stepanov2009" class="csl-entry">
Stepanov, Alexander A, and Paul McJones. 2009. <em>Elements of Programming</em>. Addison-Wesley Professional.
</div>
<div id="ref-yorgey2012" class="csl-entry">
Yorgey, Brent A. 2012. <span>“Monoids: Theme and Variations (Functional Pearl).”</span> <em>ACM SIGPLAN Notices</em> 47 (12): 105–16.
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>Note, that in group theory, it is common to omit explicit references to the operator and write the group products without it, such that, e.g. <span class="math inline">\(m \otimes n\)</span> is written as <span class="math inline">\(mn\)</span>. In that case, instead of the inverse <em>operator</em>, we speak of inverse <em>elements</em>, such that, for each <span class="math inline">\(m \in M\)</span> there is an <span class="math inline">\(m^{-1}\)</span> such that <span class="math inline">\(m^{-1}m = mm^{-1} = e\)</span>. However, this really is a distinction without difference since we can easily define the inverse element using the inverse operator and the neutral element: <span class="math inline">\(m^{-1} = (e \otimes^{-1}m)\)</span>. Thus, for the sake of keeping with the notation in the previous sections, I will use the inverse operator explicitly.<a href="mathematical-theory.html#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="problem-set.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="high-level-principles.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
