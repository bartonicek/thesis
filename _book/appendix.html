<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>11 Appendix | The Algebra of Graphics, Statistics, and Interaction</title>
  <meta name="description" content="11 Appendix | The Algebra of Graphics, Statistics, and Interaction" />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="11 Appendix | The Algebra of Graphics, Statistics, and Interaction" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="11 Appendix | The Algebra of Graphics, Statistics, and Interaction" />
  
  
  

<meta name="author" content="Adam Bartonicek" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="glossary.html"/>
<link rel="next" href="mathematical-theory.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Abstract</a></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a></li>
<li class="chapter" data-level="3" data-path="background.html"><a href="background.html"><i class="fa fa-check"></i><b>3</b> Background</a>
<ul>
<li class="chapter" data-level="3.1" data-path="background.html"><a href="background.html#brief-history"><i class="fa fa-check"></i><b>3.1</b> Brief history of interactive data visualization</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="background.html"><a href="background.html#static-data-visualization-from-ancient-times-to-the-space-age"><i class="fa fa-check"></i><b>3.1.1</b> Static data visualization: From ancient times to the space age</a></li>
<li class="chapter" data-level="3.1.2" data-path="background.html"><a href="background.html#early-interactive"><i class="fa fa-check"></i><b>3.1.2</b> Early interactive data visualization: By statisticians for statisticians</a></li>
<li class="chapter" data-level="3.1.3" data-path="background.html"><a href="background.html#web-based"><i class="fa fa-check"></i><b>3.1.3</b> Interactive data visualization and the internet: Web-based interactivity</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="background.html"><a href="background.html#what-is-interactive-visualization"><i class="fa fa-check"></i><b>3.2</b> What even is interactive data visualization?</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="background.html"><a href="background.html#interactive-interacting"><i class="fa fa-check"></i><b>3.2.1</b> Interactive vs.Â interacting with</a></li>
<li class="chapter" data-level="3.2.2" data-path="background.html"><a href="background.html#interactive-enough"><i class="fa fa-check"></i><b>3.2.2</b> Interactive <em>enough</em>?</a></li>
<li class="chapter" data-level="3.2.3" data-path="background.html"><a href="background.html#complexity-of-features"><i class="fa fa-check"></i><b>3.2.3</b> Complexity of interactive features</a></li>
<li class="chapter" data-level="3.2.4" data-path="background.html"><a href="background.html#working-definition"><i class="fa fa-check"></i><b>3.2.4</b> Working definition</a></li>
<li class="chapter" data-level="3.2.5" data-path="background.html"><a href="background.html#common-features"><i class="fa fa-check"></i><b>3.2.5</b> Common interactive features</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="background.html"><a href="background.html#general-data-visualization-theory"><i class="fa fa-check"></i><b>3.3</b> General data visualization theory</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="background.html"><a href="background.html#visualization-goals"><i class="fa fa-check"></i><b>3.3.1</b> Visualization goals</a></li>
<li class="chapter" data-level="3.3.2" data-path="background.html"><a href="background.html#visual-perception"><i class="fa fa-check"></i><b>3.3.2</b> Visual perception</a></li>
<li class="chapter" data-level="3.3.3" data-path="background.html"><a href="background.html#scales-measurement"><i class="fa fa-check"></i><b>3.3.3</b> Scales and measurement</a></li>
<li class="chapter" data-level="3.3.4" data-path="background.html"><a href="background.html#graphics-formats"><i class="fa fa-check"></i><b>3.3.4</b> Graphics formats</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="problems.html"><a href="problems.html"><i class="fa fa-check"></i><b>4</b> Challenges</a>
<ul>
<li class="chapter" data-level="4.1" data-path="problems.html"><a href="problems.html#the-structure-of-this-chapter-data-visualization-pipeline"><i class="fa fa-check"></i><b>4.1</b> The structure of this chapter: Data visualization pipeline</a></li>
<li class="chapter" data-level="4.2" data-path="problems.html"><a href="problems.html#partitioning"><i class="fa fa-check"></i><b>4.2</b> Partitioning</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="problems.html"><a href="problems.html#show-all-data"><i class="fa fa-check"></i><b>4.2.1</b> Showing the full data</a></li>
<li class="chapter" data-level="4.2.2" data-path="problems.html"><a href="problems.html#comparison-disjointness"><i class="fa fa-check"></i><b>4.2.2</b> Comparison and disjointness</a></li>
<li class="chapter" data-level="4.2.3" data-path="problems.html"><a href="problems.html#plots-as-partitions"><i class="fa fa-check"></i><b>4.2.3</b> Plots as partitions</a></li>
<li class="chapter" data-level="4.2.4" data-path="problems.html"><a href="problems.html#hierarchy"><i class="fa fa-check"></i><b>4.2.4</b> Partitions, hierarchy, and preorders</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="problems.html"><a href="problems.html#aggregation"><i class="fa fa-check"></i><b>4.3</b> Aggregation</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="problems.html"><a href="problems.html#the-relationship-between-graphics-and-statistics"><i class="fa fa-check"></i><b>4.3.1</b> The relationship between graphics and statistics</a></li>
<li class="chapter" data-level="4.3.2" data-path="problems.html"><a href="problems.html#stackable-summaries-a-brief-journey-into-category-theory"><i class="fa fa-check"></i><b>4.3.2</b> Stackable summaries: A brief journey into Category Theory</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="problems.html"><a href="problems.html#scaling"><i class="fa fa-check"></i><b>4.4</b> Scaling and encoding</a></li>
<li class="chapter" data-level="4.5" data-path="problems.html"><a href="problems.html#rendering"><i class="fa fa-check"></i><b>4.5</b> Rendering</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="problems.html"><a href="problems.html#frames"><i class="fa fa-check"></i><b>4.5.1</b> Frames</a></li>
<li class="chapter" data-level="4.5.2" data-path="problems.html"><a href="problems.html#graphical-elements"><i class="fa fa-check"></i><b>4.5.2</b> Graphical elements</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="goals.html"><a href="goals.html"><i class="fa fa-check"></i><b>5</b> Goals</a>
<ul>
<li class="chapter" data-level="5.1" data-path="goals.html"><a href="goals.html#user-profile"><i class="fa fa-check"></i><b>5.1</b> User profile</a></li>
<li class="chapter" data-level="5.2" data-path="goals.html"><a href="goals.html#programming-interface"><i class="fa fa-check"></i><b>5.2</b> Programming interface</a></li>
<li class="chapter" data-level="5.3" data-path="goals.html"><a href="goals.html#user-interface"><i class="fa fa-check"></i><b>5.3</b> User interface</a></li>
<li class="chapter" data-level="5.4" data-path="goals.html"><a href="goals.html#interactive-features"><i class="fa fa-check"></i><b>5.4</b> Interactive features</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="high-level-design.html"><a href="high-level-design.html"><i class="fa fa-check"></i><b>6</b> High-level design</a>
<ul>
<li class="chapter" data-level="6.0.1" data-path="high-level-design.html"><a href="high-level-design.html#user-profile-1"><i class="fa fa-check"></i><b>6.0.1</b> User profile</a></li>
<li class="chapter" data-level="6.1" data-path="high-level-design.html"><a href="high-level-design.html#programming-paradigm"><i class="fa fa-check"></i><b>6.1</b> Programming paradigm</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="high-level-design.html"><a href="high-level-design.html#imperative-programming"><i class="fa fa-check"></i><b>6.1.1</b> Imperative programming</a></li>
<li class="chapter" data-level="6.1.2" data-path="high-level-design.html"><a href="high-level-design.html#functional-programming"><i class="fa fa-check"></i><b>6.1.2</b> Functional programming</a></li>
<li class="chapter" data-level="6.1.3" data-path="high-level-design.html"><a href="high-level-design.html#object-oriented-programming"><i class="fa fa-check"></i><b>6.1.3</b> Object oriented programming</a></li>
<li class="chapter" data-level="6.1.4" data-path="high-level-design.html"><a href="high-level-design.html#data-oriented-programming"><i class="fa fa-check"></i><b>6.1.4</b> Data oriented programming</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="high-level-design.html"><a href="high-level-design.html#reactivity"><i class="fa fa-check"></i><b>6.2</b> Reactivity</a></li>
<li class="chapter" data-level="6.3" data-path="high-level-design.html"><a href="high-level-design.html#data-representation"><i class="fa fa-check"></i><b>6.3</b> Data representation</a></li>
<li class="chapter" data-level="6.4" data-path="high-level-design.html"><a href="high-level-design.html#rendering-engine"><i class="fa fa-check"></i><b>6.4</b> Rendering engine</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="system.html"><a href="system.html"><i class="fa fa-check"></i><b>7</b> System description</a>
<ul>
<li class="chapter" data-level="7.1" data-path="system.html"><a href="system.html#core-requirements"><i class="fa fa-check"></i><b>7.1</b> Core requirements</a></li>
<li class="chapter" data-level="7.2" data-path="system.html"><a href="system.html#high-level-api"><i class="fa fa-check"></i><b>7.2</b> High-level API (<code>plotscaper</code>)</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="system.html"><a href="system.html#api-design"><i class="fa fa-check"></i><b>7.2.1</b> API design</a></li>
<li class="chapter" data-level="7.2.2" data-path="system.html"><a href="system.html#basic-example-of-plotscaper-code"><i class="fa fa-check"></i><b>7.2.2</b> Basic example of <code>plotscaper</code> code</a></li>
<li class="chapter" data-level="7.2.3" data-path="system.html"><a href="system.html#scene-and-schema"><i class="fa fa-check"></i><b>7.2.3</b> The scene and the schema</a></li>
<li class="chapter" data-level="7.2.4" data-path="system.html"><a href="system.html#html-document-embedding"><i class="fa fa-check"></i><b>7.2.4</b> HTML document embedding</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="system.html"><a href="system.html#low-level-implementation"><i class="fa fa-check"></i><b>7.3</b> Low-level implementation (<code>plotscape</code>)</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="system.html"><a href="system.html#system-components"><i class="fa fa-check"></i><b>7.3.1</b> System components</a></li>
<li class="chapter" data-level="7.3.2" data-path="system.html"><a href="system.html#Indexable"><i class="fa fa-check"></i><b>7.3.2</b> Indexable</a></li>
<li class="chapter" data-level="7.3.3" data-path="system.html"><a href="system.html#Getter"><i class="fa fa-check"></i><b>7.3.3</b> Getter</a></li>
<li class="chapter" data-level="7.3.4" data-path="system.html"><a href="system.html#dataframe"><i class="fa fa-check"></i><b>7.3.4</b> Dataframe</a></li>
<li class="chapter" data-level="7.3.5" data-path="system.html"><a href="system.html#reactive"><i class="fa fa-check"></i><b>7.3.5</b> Reactive</a></li>
<li class="chapter" data-level="7.3.6" data-path="system.html"><a href="system.html#factors"><i class="fa fa-check"></i><b>7.3.6</b> Factors</a></li>
<li class="chapter" data-level="7.3.7" data-path="system.html"><a href="system.html#reducers"><i class="fa fa-check"></i><b>7.3.7</b> Reducers</a></li>
<li class="chapter" data-level="7.3.8" data-path="system.html"><a href="system.html#scales"><i class="fa fa-check"></i><b>7.3.8</b> Scales</a></li>
<li class="chapter" data-level="7.3.9" data-path="system.html"><a href="system.html#expanses"><i class="fa fa-check"></i><b>7.3.9</b> Expanses</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="applied-example.html"><a href="applied-example.html"><i class="fa fa-check"></i><b>8</b> Applied example</a>
<ul>
<li class="chapter" data-level="8.0.1" data-path="applied-example.html"><a href="applied-example.html#about-the-data-set"><i class="fa fa-check"></i><b>8.0.1</b> About the data set</a></li>
<li class="chapter" data-level="8.0.2" data-path="applied-example.html"><a href="applied-example.html#interactive-exploration"><i class="fa fa-check"></i><b>8.0.2</b> Interactive exploration</a></li>
<li class="chapter" data-level="8.1" data-path="applied-example.html"><a href="applied-example.html#summary"><i class="fa fa-check"></i><b>8.1</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="discussion.html"><a href="discussion.html"><i class="fa fa-check"></i><b>9</b> Discussion</a>
<ul>
<li class="chapter" data-level="9.1" data-path="discussion.html"><a href="discussion.html#limitations-of-the-theoretical-model"><i class="fa fa-check"></i><b>9.1</b> Limitations of the theoretical model</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="glossary.html"><a href="glossary.html"><i class="fa fa-check"></i><b>10</b> Glossary</a></li>
<li class="chapter" data-level="11" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>11</b> Appendix</a>
<ul>
<li class="chapter" data-level="11.1" data-path="appendix.html"><a href="appendix.html#gauss-russian-monoids"><i class="fa fa-check"></i><b>11.1</b> Gauss method and the russian peasant algorithm for monoids</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="mathematical-theory.html"><a href="mathematical-theory.html"><i class="fa fa-check"></i><b>12</b> Mathematical theory</a>
<ul>
<li class="chapter" data-level="12.0.1" data-path="mathematical-theory.html"><a href="mathematical-theory.html#relations"><i class="fa fa-check"></i><b>12.0.1</b> Relations</a></li>
<li class="chapter" data-level="12.0.2" data-path="mathematical-theory.html"><a href="mathematical-theory.html#functions"><i class="fa fa-check"></i><b>12.0.2</b> Functions</a></li>
<li class="chapter" data-level="12.0.3" data-path="mathematical-theory.html"><a href="mathematical-theory.html#partitions"><i class="fa fa-check"></i><b>12.0.3</b> Partitions</a></li>
<li class="chapter" data-level="12.0.4" data-path="mathematical-theory.html"><a href="mathematical-theory.html#preorders"><i class="fa fa-check"></i><b>12.0.4</b> Preorders</a></li>
<li class="chapter" data-level="12.0.5" data-path="mathematical-theory.html"><a href="mathematical-theory.html#monoids"><i class="fa fa-check"></i><b>12.0.5</b> Monoids</a></li>
<li class="chapter" data-level="12.0.6" data-path="mathematical-theory.html"><a href="mathematical-theory.html#groups"><i class="fa fa-check"></i><b>12.0.6</b> Groups</a></li>
<li class="chapter" data-level="12.0.7" data-path="mathematical-theory.html"><a href="mathematical-theory.html#categories"><i class="fa fa-check"></i><b>12.0.7</b> Categories</a></li>
<li class="chapter" data-level="12.0.8" data-path="mathematical-theory.html"><a href="mathematical-theory.html#functors"><i class="fa fa-check"></i><b>12.0.8</b> Functors</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>13</b> References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The Algebra of Graphics, Statistics, and Interaction</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="appendix" class="section level1 hasAnchor" number="11">
<h1><span class="header-section-number">11</span> Appendix<a href="appendix.html#appendix" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="dop-encapsulation" class="section level4 hasAnchor" number="11.0.0.1">
<h4><span class="header-section-number">11.0.0.1</span> Encapsulation in DOP<a href="appendix.html#dop-encapsulation" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>For example, hereâs how we can emulate private property access in JavaScript using Proxy. We create a namespace with a single constructor function that takes an object and a namespace and returns a proxy of the object which prevents access to the object fields outside of the namespace:</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode ts"><code class="sourceCode typescript"><span id="cb150-1"><a href="appendix.html#cb150-1" tabindex="-1"></a><span class="co">// Private.ts</span></span>
<span id="cb150-2"><a href="appendix.html#cb150-2" tabindex="-1"></a><span class="im">export</span> <span class="im">namespace</span> <span class="dt">Private</span> {</span>
<span id="cb150-3"><a href="appendix.html#cb150-3" tabindex="-1"></a>  <span class="im">export</span> <span class="kw">function</span> <span class="kw">of</span><span class="op">&lt;</span>T <span class="kw">extends</span> <span class="bu">Object</span><span class="op">&gt;</span>(object<span class="op">:</span> T<span class="op">,</span> namespace<span class="op">:</span> <span class="bu">Object</span>) {</span>
<span id="cb150-4"><a href="appendix.html#cb150-4" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">new</span> <span class="bu">Proxy</span>(<span class="kw">object</span><span class="op">,</span> {</span>
<span id="cb150-5"><a href="appendix.html#cb150-5" tabindex="-1"></a>      <span class="kw">get</span><span class="op">:</span> (t<span class="op">,</span> k<span class="op">,</span> e) <span class="kw">=&gt;</span> (e <span class="op">===</span> <span class="im">namespace</span> ? <span class="dt">Reflect</span>.<span class="dt">get</span>(<span class="dt">t</span>, <span class="dt">k</span>) : <span class="dt">undefined</span>),</span>
<span id="cb150-6"><a href="appendix.html#cb150-6" tabindex="-1"></a>      <span class="kw">set</span><span class="op">:</span> (t<span class="op">,</span> k<span class="op">,</span> v<span class="op">,</span> e) <span class="kw">=&gt;</span> (e <span class="op">===</span> <span class="im">namespace</span> ? (<span class="dt">Reflect</span>.<span class="dt">set</span>(<span class="dt">t</span>, <span class="dt">k</span>, <span class="dt">v</span>), <span class="dt">true</span>) : <span class="dt">true</span>),</span>
<span id="cb150-7"><a href="appendix.html#cb150-7" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb150-8"><a href="appendix.html#cb150-8" tabindex="-1"></a>  }</span>
<span id="cb150-9"><a href="appendix.html#cb150-9" tabindex="-1"></a>}</span></code></pre></div>
<p>We can then use this namespace in the constructor functions of data we want to make private:</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode ts"><code class="sourceCode typescript"><span id="cb151-1"><a href="appendix.html#cb151-1" tabindex="-1"></a><span class="im">import</span> { Private } <span class="im">from</span> <span class="st">&quot;./Private.ts&quot;</span></span>
<span id="cb151-2"><a href="appendix.html#cb151-2" tabindex="-1"></a></span>
<span id="cb151-3"><a href="appendix.html#cb151-3" tabindex="-1"></a><span class="co">// Data type - container for stateful data</span></span>
<span id="cb151-4"><a href="appendix.html#cb151-4" tabindex="-1"></a><span class="kw">interface</span> User {</span>
<span id="cb151-5"><a href="appendix.html#cb151-5" tabindex="-1"></a>  firstName<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb151-6"><a href="appendix.html#cb151-6" tabindex="-1"></a>  lastName<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb151-7"><a href="appendix.html#cb151-7" tabindex="-1"></a>}</span>
<span id="cb151-8"><a href="appendix.html#cb151-8" tabindex="-1"></a></span>
<span id="cb151-9"><a href="appendix.html#cb151-9" tabindex="-1"></a><span class="co">// Code module - consists of stateless functions</span></span>
<span id="cb151-10"><a href="appendix.html#cb151-10" tabindex="-1"></a><span class="im">namespace</span> <span class="dt">User</span> {</span>
<span id="cb151-11"><a href="appendix.html#cb151-11" tabindex="-1"></a>  <span class="co">// Constructor function</span></span>
<span id="cb151-12"><a href="appendix.html#cb151-12" tabindex="-1"></a>  <span class="im">export</span> <span class="kw">function</span> <span class="kw">of</span>(firstName<span class="op">:</span> <span class="dt">string</span><span class="op">,</span> lastName<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> User {</span>
<span id="cb151-13"><a href="appendix.html#cb151-13" tabindex="-1"></a>    <span class="cf">return</span> Private<span class="op">.</span><span class="fu">of</span>({firstName<span class="op">,</span> lastName}<span class="op">,</span> User)<span class="op">;</span></span>
<span id="cb151-14"><a href="appendix.html#cb151-14" tabindex="-1"></a>  }</span>
<span id="cb151-15"><a href="appendix.html#cb151-15" tabindex="-1"></a>  </span>
<span id="cb151-16"><a href="appendix.html#cb151-16" tabindex="-1"></a>  <span class="co">// Internal getter function</span></span>
<span id="cb151-17"><a href="appendix.html#cb151-17" tabindex="-1"></a>  <span class="kw">function</span> <span class="kw">get</span>(user<span class="op">:</span> User<span class="op">,</span> key<span class="op">:</span> <span class="kw">keyof</span> User) {</span>
<span id="cb151-18"><a href="appendix.html#cb151-18" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">Reflect</span><span class="op">.</span><span class="fu">get</span>(user<span class="op">,</span> key<span class="op">,</span> User)<span class="op">;</span></span>
<span id="cb151-19"><a href="appendix.html#cb151-19" tabindex="-1"></a>  }</span>
<span id="cb151-20"><a href="appendix.html#cb151-20" tabindex="-1"></a>  <span class="co">// We could do the same thing for a private setter</span></span>
<span id="cb151-21"><a href="appendix.html#cb151-21" tabindex="-1"></a>  </span>
<span id="cb151-22"><a href="appendix.html#cb151-22" tabindex="-1"></a>  <span class="im">export</span> <span class="kw">function</span> <span class="fu">getFullName</span>(user<span class="op">:</span> User) {</span>
<span id="cb151-23"><a href="appendix.html#cb151-23" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">get</span>(user<span class="op">,</span> <span class="vs">`firstName`</span>) <span class="op">+</span> <span class="vs">` `</span> <span class="op">+</span> <span class="kw">get</span>(user<span class="op">,</span> <span class="vs">`lastName`</span>)<span class="op">;</span></span>
<span id="cb151-24"><a href="appendix.html#cb151-24" tabindex="-1"></a>  }</span>
<span id="cb151-25"><a href="appendix.html#cb151-25" tabindex="-1"></a>}</span>
<span id="cb151-26"><a href="appendix.html#cb151-26" tabindex="-1"></a></span>
<span id="cb151-27"><a href="appendix.html#cb151-27" tabindex="-1"></a><span class="kw">const</span> user <span class="op">=</span> User<span class="op">.</span><span class="fu">of</span>(<span class="vs">`Adam`</span><span class="op">,</span> <span class="vs">`Bartonicek`</span>)<span class="op">;</span></span>
<span id="cb151-28"><a href="appendix.html#cb151-28" tabindex="-1"></a></span>
<span id="cb151-29"><a href="appendix.html#cb151-29" tabindex="-1"></a>user<span class="op">.</span><span class="at">firstName</span> <span class="op">=</span> <span class="vs">`Bob`</span></span>
<span id="cb151-30"><a href="appendix.html#cb151-30" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(user)</span>
<span id="cb151-31"><a href="appendix.html#cb151-31" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(user<span class="op">.</span><span class="at">lastName</span>)<span class="op">;</span></span>
<span id="cb151-32"><a href="appendix.html#cb151-32" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(User<span class="op">.</span><span class="fu">getFullName</span>(user))<span class="op">;</span></span></code></pre></div>
<pre><code>## {
##   firstName: &quot;Adam&quot;,
##   lastName: &quot;Bartonicek&quot;,
## }
## undefined
## Adam Bartonicek</code></pre>
<p>Clearly, it is possible to encapsulate data while maintaining separation between data and code. Specifically, the data underpinning <code>User</code> is still a plain data object and can be inspected using <code>console.log</code>. However, we cannot access or modify its properties outside of the <code>User</code> code module.</p>
</div>
<div id="gauss-russian-monoids" class="section level2 hasAnchor" number="11.1">
<h2><span class="header-section-number">11.1</span> Gauss method and the russian peasant algorithm for monoids<a href="appendix.html#gauss-russian-monoids" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Assume we have a commutative monoid <span class="math inline">\((M, e, \otimes)\)</span> and a sequence <span class="math inline">\(s\)</span> obtained by repeatedly taking a product of an element <span class="math inline">\(a \in M\)</span> with some fixed increment <span class="math inline">\(b \in M\)</span>, such that <span class="math inline">\(s = (a, (a \otimes b), (a \otimes b \otimes b), \ldots)\)</span>. If we want to reduce <span class="math inline">\(s\)</span> into a total product <span class="math inline">\(p\)</span> by repeatedly applying the operation <span class="math inline">\(\otimes\)</span>, i.e.Â <span class="math inline">\(p = a \otimes (a \otimes b) \otimes (a \otimes b \otimes b) \otimes \ldots\)</span>, then we can use commutativity and associativity to rearrange the expression in the following way:</p>
<p><span class="math display">\[\begin{align}
p &amp;= a \otimes (a \otimes b) \otimes (a \otimes b \otimes b) \otimes \ldots \\
&amp;= (a \otimes b^0) \otimes  (a \otimes b^1) \otimes (a \otimes b^2) \otimes \ldots \otimes \otimes (a \otimes b^{n - 1}) \otimes (a \otimes b^n) \\
&amp;= [(a \otimes b^0) \otimes (a \otimes b^n)] \otimes [(a \otimes b^1) \otimes (a \otimes b^{n - 1})] \otimes \ldots \\
&amp;= [a \otimes (a \otimes b^n)]^{n / 2} \\
&amp;= d^{n / 2}
\end{align}\]</span></p>
<p>Where <span class="math inline">\(d = a \otimes (a \otimes b^n)\)</span> is just the product of the first and the last elements in the sequence, respectively. This echoes the Gauss method of summing arithmetic series, although in that case, the repeated operations (sums) can be simplified even further, by relating sums to products (<span class="math inline">\((1 + n)^{n / 2} = [n(n + 1)] / 2\)</span>). Here, we may not necessarily have a way to simplify repeated products, however, since <span class="math inline">\(d\)</span> is fixed, we can use the Russian peasant algorithm to compute the total product in <span class="math inline">\(O(\log n)\)</span> time via squaring:</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="appendix.html#cb153-1" tabindex="-1"></a>russian_peasant <span class="ot">&lt;-</span> <span class="cf">function</span>(x, fn, e, n) {</span>
<span id="cb153-2"><a href="appendix.html#cb153-2" tabindex="-1"></a>  result <span class="ot">&lt;-</span> e</span>
<span id="cb153-3"><a href="appendix.html#cb153-3" tabindex="-1"></a></span>
<span id="cb153-4"><a href="appendix.html#cb153-4" tabindex="-1"></a>  <span class="cf">while</span> (n <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb153-5"><a href="appendix.html#cb153-5" tabindex="-1"></a>    <span class="cf">if</span> (n <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">!=</span> <span class="dv">0</span>) result <span class="ot">&lt;-</span> <span class="fu">fn</span>(result, x)</span>
<span id="cb153-6"><a href="appendix.html#cb153-6" tabindex="-1"></a>    n <span class="ot">&lt;-</span> <span class="fu">floor</span>(n <span class="sc">/</span> <span class="dv">2</span>)</span>
<span id="cb153-7"><a href="appendix.html#cb153-7" tabindex="-1"></a>    x <span class="ot">&lt;-</span> <span class="fu">fn</span>(x, x)</span>
<span id="cb153-8"><a href="appendix.html#cb153-8" tabindex="-1"></a>  }</span>
<span id="cb153-9"><a href="appendix.html#cb153-9" tabindex="-1"></a></span>
<span id="cb153-10"><a href="appendix.html#cb153-10" tabindex="-1"></a>  result</span>
<span id="cb153-11"><a href="appendix.html#cb153-11" tabindex="-1"></a>}</span>
<span id="cb153-12"><a href="appendix.html#cb153-12" tabindex="-1"></a></span>
<span id="cb153-13"><a href="appendix.html#cb153-13" tabindex="-1"></a>reduce_sequence <span class="ot">&lt;-</span> <span class="cf">function</span>(x, fn, e) {</span>
<span id="cb153-14"><a href="appendix.html#cb153-14" tabindex="-1"></a>  d <span class="ot">&lt;-</span> <span class="fu">fn</span>(x[<span class="dv">1</span>], x[<span class="fu">length</span>(x)])</span>
<span id="cb153-15"><a href="appendix.html#cb153-15" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="fu">floor</span>(<span class="fu">length</span>(x) <span class="sc">/</span> <span class="dv">2</span>)</span>
<span id="cb153-16"><a href="appendix.html#cb153-16" tabindex="-1"></a>  <span class="fu">russian_peasant</span>(d, fn, e, n)</span>
<span id="cb153-17"><a href="appendix.html#cb153-17" tabindex="-1"></a>}</span>
<span id="cb153-18"><a href="appendix.html#cb153-18" tabindex="-1"></a></span>
<span id="cb153-19"><a href="appendix.html#cb153-19" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">8</span></span>
<span id="cb153-20"><a href="appendix.html#cb153-20" tabindex="-1"></a><span class="fu">sum</span>(x)</span>
<span id="cb153-21"><a href="appendix.html#cb153-21" tabindex="-1"></a><span class="fu">reduce_sequence</span>(x, sum, <span class="dv">0</span>)</span>
<span id="cb153-22"><a href="appendix.html#cb153-22" tabindex="-1"></a></span>
<span id="cb153-23"><a href="appendix.html#cb153-23" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">^</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>)</span>
<span id="cb153-24"><a href="appendix.html#cb153-24" tabindex="-1"></a><span class="fu">prod</span>(x)</span>
<span id="cb153-25"><a href="appendix.html#cb153-25" tabindex="-1"></a><span class="fu">reduce_sequence</span>(x, prod, <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] 36
## [1] 36
## [1] 68719476736
## [1] 68719476736</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="glossary.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="mathematical-theory.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
